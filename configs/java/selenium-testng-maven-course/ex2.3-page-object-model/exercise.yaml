metadata:
  id: "java-selenium-testng-maven-course-ex2.3"
  name: "Exercise 2.3: Page Object Model"
  exercise: 2.3
  session: 1
  week: 1
  duration_hours: 3
  inherits: "../../../course.yaml"

requirements:
  description: |
    Create LoginPage class with locators and actions (enterUsername, enterPassword,
    clickSubmit). Create SuccessPage class with success message locator and methods.
    Refactor Exercise 1.3 login tests to use POM pattern. Page classes should
    accept WebDriver in constructor and return page objects for flow.

  must_have:
    - "LoginPage class in pages package"
    - "SuccessPage class in pages package"
    - "Locators as private final By constants"
    - "Page methods accept WebDriver in constructor"
    - "Page methods return Page objects for chaining"
    - "No test logic (assertions) in page classes"
    - "No findElement() calls in test classes"
    - "Login tests refactored to use POM"

  nice_to_have:
    - "BasePage class with common functionality"
    - "PageFactory @FindBy annotations"
    - "LoadableComponent pattern"
    - "Page verification methods (isLoaded)"

checklist:
  - item: "LoginPage class exists"
    category: "selenium"
    weight: 15
  - item: "SuccessPage class exists"
    category: "selenium"
    weight: 15
  - item: "Locators as private final By constants"
    category: "selenium"
    weight: 15
  - item: "Page methods return Page objects"
    category: "design"
    weight: 15
  - item: "No test logic in page classes"
    category: "design"
    weight: 15
  - item: "Tests use page objects only"
    category: "selenium"
    weight: 15
  - item: "No findElement() in tests"
    category: "design"
    weight: 10
  - item: "Tests pass reliably"
    category: "testng"
    weight: 10

additional_rules:
  - id: "page_class_exists"
    pattern: "class\\s+\\w+Page"
    message: "Page classes should have 'Page' suffix"
    severity: "error"
    category: "selenium"

  - id: "page_package"
    pattern: "package\\s+.*\\.pages"
    message: "Page classes should be in 'pages' package"
    severity: "warning"
    category: "design"

  - id: "locator_as_constant"
    pattern: "private\\s+static\\s+final\\s+By\\s+\\w+"
    message: "Locators should be private static final By constants"
    severity: "error"
    category: "selenium"

  - id: "assertion_in_page_class"
    pattern: "(class\\s+\\w+Page.*Assert\\.)|(Assert\\..*class\\s+\\w+Page)"
    message: "Page classes should not contain assertions (test logic)"
    severity: "error"
    category: "design"

pr_expectations:
  title_format: "ex2.3: {brief_description}"
  title_examples:
    - "ex2.3: Page Object Model for login flow"
    - "Exercise 2.3 - LoginPage and SuccessPage with POM pattern"

  description_template: |
    ## Summary
    Refactored login automation to use Page Object Model pattern.

    ## What's done
    - [x] Created LoginPage class
    - [x] Created SuccessPage class
    - [x] Locators as private final By constants
    - [x] Page methods accept WebDriver and return Page objects
    - [x] No test logic in page classes
    - [x] Refactored tests to use POM
    - [x] No findElement() in test classes

    ## How to test
    mvn test -Dtest=LoginTest

  screenshots_required: true

ai_instructions_override: |
  Review Exercise 2.3 (Page Object Model):
  1. Page Class Structure (30 points) - separate page classes, pages package, WebDriver constructor
  2. Locator Encapsulation (25 points) - locators as constants, no inline findElement()
  3. Method Design (25 points) - methods return Page objects, represent user actions
  4. Test Refactoring (20 points) - tests use page objects, no findElement() in tests

  Score: 0-100
  Any findElement() or assertions in page classes = -10 points each

learning_objectives:
  - "Page Object Model pattern"
  - "Create page classes with proper structure"
  - "Encapsulate locators in page classes"
  - "Design page methods for chaining"
  - "Separate test logic from page logic"
  - "Refactor existing tests to use POM"

resources:
  documentation:
    - "https://selenium.dev/documentation/test_practices/encouraged/page_object_models/"
    - "https://github.com/SeleniumHQ/selenium/wiki/Page-Objects"
