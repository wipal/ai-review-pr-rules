metadata:
  id: "java-selenium-testng-maven-course-ex1.4"
  name: "Exercise 1.4: Wait Strategies"
  exercise: 1.4
  session: 1
  week: 1
  duration_hours: 2.5
  inherits: "../../../course.yaml"

requirements:
  description: |
    Navigate to https://the-internet.herokuapp.com/dynamic_loading/1
    Click "Start" button, wait for loading bar to disappear,
    wait for success message to appear, and verify "Hello World!" text.
    Use WebDriverWait with ExpectedConditions - NO Thread.sleep().

  must_have:
    - "Navigate to dynamic loading page"
    - "Click Start button"
    - "Use WebDriverWait to wait for loading to finish"
    - "Use ExpectedConditions for element visibility"
    - "Verify 'Hello World!' text with assertion"
    - "Absolutely NO Thread.sleep() calls"
    - "Appropriate timeout values (10-30 seconds)"

  nice_to_have:
    - "Custom ExpectedCondition for complex waits"
    - "FluentWait with custom polling interval"
    - "Wait for element invisibility (loading bar)"
    - "Wait for element visibility (success message)"

checklist:
  - item: "WebDriverWait used"
    category: "selenium"
    weight: 20
  - item: "ExpectedConditions used"
    category: "selenium"
    weight: 20
  - item: "NO Thread.sleep() anywhere"
    category: "selenium"
    weight: 25
  - item: "Wait for loading to disappear"
    category: "selenium"
    weight: 15
  - item: "Wait for Hello World to appear"
    category: "selenium"
    weight: 10
  - item: "Appropriate timeout values"
    category: "selenium"
    weight: 5
  - item: "Test passes reliably"
    category: "testng"
    weight: 5

additional_rules:
  - id: "no_thread_sleep_strict"
    pattern: "Thread\\.sleep\\("
    message: "Thread.sleep() is FORBIDDEN - use WebDriverWait instead"
    severity: "error"
    category: "selenium"

  - id: "webdriverwait_used"
    pattern: "new WebDriverWait\\("
    message: "WebDriverWait must be used for waiting"
    severity: "error"
    category: "selenium"

  - id: "expectedconditions_used"
    pattern: "ExpectedConditions\\.(visibilityOf|presenceOfLocated|invisibilityOf|textToBe)"
    message: "ExpectedConditions should be used for wait conditions"
    severity: "error"
    category: "selenium"

pr_expectations:
  title_format: "ex1.4: {brief_description}"
  title_examples:
    - "ex1.4: WebDriverWait for dynamic loading elements"
    - "Exercise 1.4 - Wait strategies with ExpectedConditions"

  description_template: |
    ## Summary
    Implemented explicit waits using WebDriverWait and ExpectedConditions.

    ## What's done
    - [x] Navigate to dynamic loading page
    - [x] Click Start button
    - [x] Wait for loading bar to disappear
    - [x] Wait for Hello World message to appear
    - [x] Verify "Hello World!" text
    - [x] NO Thread.sleep() calls

    ## How to test
    mvn test

  screenshots_required: true

ai_instructions_override: |
  Review Exercise 1.4 (Wait Strategies):
  1. Explicit Waits (35 points) - WebDriverWait, ExpectedConditions, appropriate timeout
  2. No Thread.sleep() (25 points) - absolutely NO Thread.sleep() calls
  3. Wait Conditions (25 points) - wait for loading bar, success message
  4. Code Quality (15 points) - clean implementation, good names

  Score: 0-100
  Any Thread.sleep() = automatic -25 points

learning_objectives:
  - "Implicit vs explicit waits"
  - "WebDriverWait class"
  - "ExpectedConditions for element states"
  - "Wait for visibility/invisibility"
  - "Choose appropriate timeout values"
  - "Avoid Thread.sleep() anti-pattern"

resources:
  documentation:
    - "https://selenium.dev/documentation/webdriver/waits/"
    - "https://selenium.dev/documentation/webdriver/support_classes/expected_conditions/"
